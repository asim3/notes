..title..
Kubernetes

..link.. kubernetes/master.txt
..


..sub_title..
Kubernetes settings


..code..
sudo kubectl config view


..text..
clusters
..code..
sudo kubectl config get-clusters
sudo kubectl config delete-cluster my-new-k3d

sudo kubectl config set-cluster cluster_nickname --server=https://10.68.15.202:36871
sudo kubectl config set-cluster cluster_nickname --insecure-skip-tls-verify=true
# OR
sudo kubectl config set-cluster cluster_nickname --certificate-authority=~/.kube/my-cluster/kube.ca.crt


..text..
context
..code..
sudo kubectl config get-contexts
sudo kubectl config delete-context my-new-k3d

sudo kubectl config current-context
sudo kubectl config use-context context_nickname

sudo kubectl config set-context context_nickname --cluster=cluster_nickname
sudo kubectl config set-context context_nickname --user=user_nickname
sudo kubectl config set-context context_nickname --namespace=namespace

..text..
credentials
..code..
sudo kubectl config set-credentials user_nickname --username=admin --password=aaa
sudo kubectl config set-credentials ccc --username=bbb --password=aaa
    --client-certificate=path/to/certfile.crt 
    --client-key=path/to/keyfile.key 

    --token=bearer_token
    --auth-provider=provider_name
    --auth-provider-arg=key=value


..text..
unset
..code..
sudo kubectl config unset clusters
sudo kubectl config unset contexts
sudo kubectl config unset users
sudo kubectl config unset users.ccc
sudo kubectl config unset current-context



..sub_title..
user management

..text..
Manage user accounts
..code..
sudo kubectl get ns # list namespace
sudo kubectl create namespace namespace-nickname



..text..
service account
..code..
sudo kubectl get sa

nano my_service_file.yml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: service-nickname
  namespace: namespace-nickname


sudo kubectl create -f my_service_file.yml

sudo kubectl get      sa -n namespace-nickname
sudo kubectl describe sa service-nickname -n namespace-nickname
sudo kubectl delete   sa service-nickname -n namespace-nickname

---
apiVersion: v1
kind: Pod
metadata:
  name: pod-nickname
  namespace: namespace-nickname
spec: 
  serviceAccountName: service-nickname 
  containers:
  - # ...